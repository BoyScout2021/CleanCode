# 3장 함수

### 들어가면서

함수 : 프로그램의 가장 기본적인 단위이다.
이 장은 함수를 잘 만드는 법을 소개합니다.

<br>

### 작게 만들어라!

함수를 만드는 첫번째 규칙이다.


그럼 얼마나 짧아야 좋다고 이야기할 수 있을까??
켄트 벡은 모든 함수를 2~4줄 사이로 작성하였다고 한다.

함수가 짧으면 짧을 수록 **각 함수가 이야기 하나를 표현하고**, **하는 일이 명백히 보인다**.

#### 블록과 들여쓰기

`if/else` 문, `while`문 등에 들어가는 블록은 한 줄이어야 한다.
그리고 이 블록 안에서 호출하는 함수 이름을 적절히 짓는다면 이해하기도 쉬워진다.

(공감합니다. 저도 더 나누도록 노력해봐야겠네요. 잘 안지켜져있는 코드도 많더라구요.)

#### 한 가지만 해라!

한 가지만 하는지 어떻게 파악하나?

1. 추상화 수준을 판단한다.
2. 해당 함수를 의미 있는 이름으로 다른 함수를 추출할 수 있는지 생각해본다.

(함수 이름의 의미를 유지하면서 그 의미를 더 이상 줄이기 불가능할때 함수가 한 가지 기능만 한다고 이해했다.)

#### 함수 당 추상화 수준은 하나로!

한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 오도록 한다.
- 위에서 아래로 이야기 처럼 읽혀야 한다.
- 각 함수가 다음 함수를 소개하게 된다.

<br>

### Switch 문

해당 예제(변경 전, 변경 후) 구조와 같이 리팩토링할 부분이 바로 생각이 나진 않네요.

예제를 통해 이렇게도 바꿀 수 있다를 보여주는 것 같았습니다.

<br>

### 서술적인 이름을 사용하라!
길고 서술적인 이름이 짧고 어려운 이름보다 좋다.
여러 단어가 쉽게 읽히는 명명법을 사용하라.

애초에 함수가 작고 단순할수록 이름 붙이기가 쉬워진다.

모듈 내에서는 함수 이름은 같은 문구, 명사, 동사로 일관되도록 사용해야한다.

```swift
includeSetupAndTeardownPages()
includeSetupPages()
includeSuiteSetupPage()
...
```

<br>

### 함수 인수

인수 개수가 적을 수록 좋다.

코드를 읽는 사람이 함수 이름 뿐만 아니라 인수의 의미도 해석해야하기 때문이다.

`Swift`는 매개변수 이름과 `Argument Label`(인자 이름표)를 작성할 수 있어 가독성에 조금 더 도움을 줄 수 있게 되어있다.

```swift
// 사람 이름과 출신지를 받아서 인사말을 반환하도록 하는 함수
// 여기서 from이 Argument Label이다.
func greet(person: String, from hometown: String) -> String {
  return "Hello \(person)! Glad you could visit from \(hometown)."
}

print (greet(person: "Bill", from: "Cupertino"))
// "Hello Bill! Glad you could visit from Cupertino."
```

테스트 관점에서도 인수가 많으면 모든 조합을 구성해 테스트해야하기 때문에 더 복잡해진다.

#### 많이 쓰는 단항 형식
1. 인수에게 질문을 던지는 경우
    `func fileExists(atPath path: String) -> Bool`
2. 인수를 무엇인가로 변환해 결과를 반환하는 경우
    `URL(string: "www.google.com")`
    
#### 플래그 인수
플래그 인수가 들어간다는 것은 해당 함수가 여러 가지를 처리한다는 것을 의미하므로 되도록 쓰지말자..

#### 인수 객체
인수가 2~3개 필요하다면 같은 개념을 묶어서 객체로 만들어 표현하는 방법도 고려해보자.

#### 동사와 키워드
단항 함수는 함수와 인수가 동사/명사 쌍을 이뤄야 한다.
- writeField(name) : name이 field라는 것을 분명히 함.
- assertExpectedEqualsActual(exepected, actual) : 인수 순서가 헷갈릴 여지가 없다.

<br>

### 부수 효과를 일으키지 마라!
애초에 함수가 한가지 동작만 한다면 사이드 이펙트가 일어나지 않는다.

#### 출력 인수
출력 인수는 피해라.
함수에서 상태를 변경해야 한다면 함수가 속한 객체 상태를 변경하는 방식을 사용하도록 한다.
(객체 내부에서 객체를 변경하는 함수를 만들 것)

<br>

### 명령과 조회를 분리하라!
- 객체 정보를 반환하기
- 객체 상태를 변경하기

둘 중 하나만 할 것!

<br>

### 오류 코드보다 예외를 사용하라!
- Try/Catch 블록을 별도 함수로 뽑아내기
- 오류를 처리하는 함수는 오류만 처리해야만 한다.

<br>

### 번복하지 마라!

<br>

### 구조적 프로그래밍
- 함수의 return 문은 하나 일 것
- 루프 안에서 break, continue, goto는 사용해선 안된다.
(그냥 이런것이 있다고 이야기를 해주는 것 같았습니다.)

<br>

### 함수를 어떻게 짜죠?
- 내키는 대로 짜기
- 코드 다듬기
    - 함수를 만들고
    - 이름을 바꾸고
    - 중복을 제거하고
    - 메서드를 줄이고 순서도 바꿔본다.

(내키는 대로 작성할때나 코드를 다듬을 때나 단위 테스트 케이스를 만들어야 한다.)

<br>

### 결론
시스템을 구현할 프로그램이 아닌 풀어갈 이야기로 여겨야 한다.
그러기 위해선 함수가 위와 같은 규칙을 잘 따라서 분명하고 정확한 언어로 작성되어야 할 것 이다.

<br>

### 참고 문서

- https://docs.swift.org/swift-book/LanguageGuide/Functions.html
- http://xho95.github.io/swift/language/grammar/function/2020/06/02/Functions.html
