# 형식 맞추기

- 프로그래머라면 형식을 깔끔하게 맞춰 코드를 짜야 한다
- 스타일은 일관적이고 매끄러워야 하며, 한 소스 파일에서 봤던 형식이 다른 소스 파일에도 쓰이리라는 신뢰감을 독자에게 줘야 한다.
- 코드 형식을 맞추기 위한 간단한 규칙을 정하고 모두가 그 규칙을 따라야 하며, 필요하다면 규칙을 자동으로 적용하는 도구(Swift Lint)를 활용한다.

## 왜 코드의 형식을 맞춰야 하는가?

- 코드 형식은 의사소통의 일환이다.
- 오늘 구현한 기능이 다음 버전에서 바뀔 확률은 아주 높으므로, 오늘 구현한 코드의 가독성은 앞으로 바뀔 코드의 품질에 큰 영향을 미친다.
- 원래 코드는 사라질지라도 처음 작성되었던 개발자의 스타일과 규율은 사라지지 않는다.

## 형식을 맞추는 방법

### 적절한 행 길이 유지

- 대부분 200줄 정도인 파일로도 거대한 시스템을 구축할 수 있다.
- 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다.

### 신문 기사처럼 작성

- 신문 기사를 읽을 때 독자는 위에서 아래로 기사를 읽고, 최상단에 기사를 몇마디로 요약하는 표제가 나온다.
  - 이름은 간단하면서도 설명이 가능하게, 이름만 보고도 올바른 모듈을 살펴보고 있는지 아닌지 판단할 정도로 신경써서 짓기
- 첫 문단은 전체 기사 내용을 요약하며, 아래로 내려갈수록 세세한 사실이 조금씩 드러난다.
  - 첫 부분은 고차원 개념과 알고리즘에 대한 설명, 아래로 내려갈수록 의도를 세세하게 표현하는 로직, 마지막에는 가장 저차원의 함수와 세부 내역이 나오도록 작성하기

### 개념은 빈 행으로 분리

- 각 행은 수식이나 절을 나타내고, 일련의 행 묶음은 완결된 생각 하나를 표현하도록 작성
- 빈 행은 새로운 개념을 시작한다는 시각적 단서, 각각의 개념 사이에 빈 행을 넣어 분리하면 가독성이 높아진다.

### 세로 밀집도와 수직 거리

- 빈 행이 개념을 분리한다면, 세로 밀집도는 개념의 연관성을 의미
- 서로 밀접한 연관을 가진 코드는 세로로 가까이 놓여야 한다.
  - 연관성이 깊은 두 개념이 멀리 떨어져 있으면, 코드를 읽는 사람이 코드를 여기저기 뒤지게 되어 가독성이 떨어진다.
- **변수 선언**
  - 변수는 사용하는 위치에서 최대한 가까이에 선언
  - 반복문을 제어하는 변수는 반복문 내부에 선언
  - 긴 함수에서는 상단에 변수를 몰아서 선언하기도 한다.
- **인스턴스 변수**
  - 인스턴스 변수는 클래스 맨 처음에 몰아서 선언
- **종속 함수**
  - 한 함수가 다른 함수를 호출한다면, 두 함수는 세로로 가까이 배치한다.
  - 호출하는 함수를 호출되는 함수보다 먼저 배치하여 자연스럽게 읽히도록 작성
- **개념적 유사성**
  - 개념적인 친화도가 높을수록 코드를 가까이 배치한다.
    - 한 함수가 다른 함수를 호출해 종속성을 가지는 경우
    - 변수와 그 변수를 사용하는 함수
    - 명명법과 기능이 유사한 함수

### 가로 형식 맞추기

- 가능한 한 짧게 작성하고 길어지더라도 최대 120자 정도로 행 길이를 제한

### 가로 공백과 밀집도

- 두 가지 주요 요소가 확실히 나뉜다는 것을 표현해야 할 때 공백을 넣는다.
  - 할당 연산자
- 함수와 인수는 밀접한 관계를 가지므로 공백을 넣지 않는다.
- 연산자의 우선순위를 강조하기 위해 공백을 사용
  - 곱셈은 우선순위가 가장 높으므로 공백을 사용하지 않고, 우선순위가 낮은 덧셈과 뺄셈은 항 사이에 공백을 넣어준다. (이건 팀 내부 조율이 필요할듯..?)

### 들여쓰기

- 소스 파일에서 범위로 이루어진 계층을 표현하기 위해 코드를 들여쓴다.

- 코드가 속하는 범위를 들여쓰기를 통해 시각적으로 표현, 들여쓰는 정도는 계층에서 코드가 자리잡은 수준에 비례한다.

- **들여쓰기를 무시하는 코드 피하기**

  - ```swift
    if ~~~ { }
    guard ~~~ else { return }
    var a: Int { 3 }
    func foo() {  }
    ```

    (guard 문이나 연산 프로퍼티는 봐줄만하지 않나..?)

### 팀 내 코딩 컨벤션

- 프로그래머라면 각자 선호하는 규칙이 있지만, 팀에 속한다면 팀 내 규칙을 우선으로 지켜야 한다.
- 여러 명이 짠 코드도 한 사람이 짠 코드처럼 보이도록 일관된 규칙에 따라 코드를 작성해야 한다.
