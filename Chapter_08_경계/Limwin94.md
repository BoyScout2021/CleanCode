# 8장 경계

외부 코드를 우리 코드에 깔끔하게 통합하는, 소프트웨어 경계를 깔끔하게 처리하는 기법과 기료를 살펴봅니다.

<br>

## 외부 코드 사용하기
책에서는 `Map(java.util.Map)`을 예로 들었습니다. `Map`을 만들어 여기저기 넘기다 보면 사용하는 쪽에서 `clear()`로 내용을 삭제 할수도 있고, `Map`에 특정 타입이 아닌 다른 타입이 들어오게 되는 사이드 이펙트가 발생하게 될 수 있습니다.

여기서는 

```java
public class Sensors {
    private Map sensors = new HashMap();
    
    public Sensor getById(String id) {
        return (sensor) sensors.get(id);
    }
}
```

`Sensors`클래스를 만들어 필요한 정보만 제공할 수 있게 했네요.

꼭 이렇게 사용하는 방법도 있겠지만 
요지는`Map`과 같은 경계 인터페이스를 이용할때는 클래스 외부로 노출되지 않도록 주의해야 합니다.

<br>

## 경계 살피고 익히기
보통 문서를 읽으면서 외부 코드(거의 대부분 라이브러리겠죠?)를 익히지만, **학습 테스트**를 적용해 간단한 테스트 케이스를 작성하면서 익히는걸 권장합니다.

<br>

## log4j 익히기
위에서 살펴본 내용 처럼 익히는 방식을 소개한것 같아 보입니다.
`log4j`는 로깅 기능이 구현되어 있는 외부 코드인데, 초기화 하는 방법을 익히기 위한 간단한 테스트 케이스 몇 개를 작성 후 `로거 클래스`로 랩핑해서 사용하는 것으로 마무리 합니다.

<br>

## 학습 테스트는 공짜 이상이다
장점에 대해 나열하네요.
- 필요한 지식만 확보할 수 있다.
- 새 버전이 나온다면 학습 테스트를 돌려 차이를 확인한다.

도입한 라이브러리를 검증하는 테스트가 있다면 새 버전이 호환이 되지 않더라도 빠르게 수정이 가능하게 됩니다.

<br>

## 아직 존재하지 않는 코드를 사용하기
또 다른 경계 유형에 대해 설명합니다.
- 아는 코드와 모르는 코드를 분리하는 경계

`Swift`에서는 `protocol`을 활용해서 구현하면 될 것 같습니다.
```swift
protocol Transmitter {
    func transmit(frequency: Double, stream: Data)
}
```

결론은 필요한 동작만 정의한 인터페이스(프로토콜)를 사용했기 때문에 코드 가독성이 좋아지고, 코드 의도도 확실해지며, 테스트 또한 편해집니다.

<br>

## 깨끗한 경계
- 경계에 위치하는 코드는 깔끔히 분리한다.
- 기대치를 정의하는(사용 목적을 말하는 것 같습니다.) 테스트 케이스를 작성한다.
- 통제가 가능한 우리 코드에 의존하도록 해라.(새로운 클래스로 랩핑 혹은 ADAPTER 패턴 적용)
