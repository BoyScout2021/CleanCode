# 창발성

혹은 떠오름 현상이라고 합니다.
> 하위 계층(구성 요소)에는 없는 특성이나 행동이 상위 계층(전체 구조)에서 자발적으로 돌연히 출현하는 현상

프로그래밍적으로 생각해보면 밑에 나열된 4가지 설계들을(작은 구성 요소) 잘 구성하면 전체 구조(소프트웨어)의 품질을 높일 수 있다는 의미와 연결되는 것 같습니다.


---

## 창발적 설계로 깔끔한 코드를 구현하자
단순한 설계 규칙 4가지가 소프트웨어 설계 품질을 크게 높여준다.

1. 모든 테스트를 실행한다.
2. 중복을 없앤다.
3. 프로그래머 의도를 표현한다.
4. 클래스와 메서드 수를 최소로 줄인다.

(오히려 잘게 나누다 보면 최소로 줄이기 어려워 지지 않나..? 그럼에도 최소로 줄이라는 노력을 하라는 걸로 이해했습니다.

-> 밑에 한번 더 언급하네요.)


<br>

## 단순한 설계 규칙 1: 모든 테스트를 실행하라.
테스트를 실행해서 통과하는 것이 중요하다기 보단 테스트가 존재 할 수 있는 시스템이 요지이다.

테스트 가능한 시스템을 만들려고 하다보면 설계 품질 또한 높아지게 된다.

예를 들면 크기가 작고 목적 하나만 수행하는 클래스가 나올 가능성이 높아진다.
의존성 주입, 프로토콜(인터페이스), 추상화 등을 사용해 결합도를 낮추게 된다.

<br>

## 단순한 설계 규칙 2~4: 리팩터링
코드 몇 줄을 추가할 때마다 테스트 케이스를 돌려 기존 기능을 깨뜨리지 않았다는 사실을 확인해야 한다.

리팩터링은 설계 품질을 높이는 기법이라면 무엇이든 적용해라.
- 응집도 높이기
- 결합도 낮추기
- 관심사 분리 (모듈로 나누기)
- 함수와 클래스 크기 줄이기
- 적절한 네이밍 선택
- 중복을 제거 (2단계)
- 프로그래머 의도를 표현 (3단계)
- 클래스와 메서드 수를 최소로 줄이기 (4단계)

<br>

## 중복을 없애라
똑같은 코드는 당연히 없애야하고, 
비슷한 코드는 더 비슷하게 고쳐준다.(..??)

### 구현 중복 없애보기
```swift
func size() -> Int {} // 개수 반환
func isEmpty() -> Bool {} // bool값 반환
```

이렇게 각 메서드를 따로 작성할 수 있지만

```swift
func isEmpty() -> Bool {
    return size() == 0
}
```


size() 메서드를 사용하지 않았으면 size를 구하는 중복된 코드를 작성했어야 하지만, <br>
위처럼 이미 만들어져있는 size() 메서드를 이용하면 코드를 중복해 구현할 필요가 없어진다.

### Template Method
고차원 중복을 제거할 목적으로 자주 사용하는 기법

상위 계층에서는 중복된 코드를 작성하고 하위 계층에서는 중복되지 않는 코드만 구현한다.

<br>

## 표현하라

코드는 개발자의 의도를 분명히 표현해야 한다.<br>
-> 그 코드를 다른사람이 봐도 이해하기 쉽기 때문이다.

1. 좋은 이름을 선택한다.
2. 함수와 클래스 크기를 가능한 줄인다.
3. 표준 명칭을 사용한다.
    - 패턴명을 명시해준다.. **viewModel, **Command 등..
4. 단위 테스트 케이스를 꼼꼼히 작성한다.
    - 테스트 케이스는 '예제로 보여주는 문서'이다.

이름을 지을때 충분한 고민을 하고 조금만 더 주의를 기울이는 습관을 들입시다. <br>
개인적으로 코드에 대한 구조(아키텍쳐)보다도 일단 클린한 이름이 더 우선순위가 높다고 생각합니다.

<br>

## 클래스와 메서드 수를 최소로 줄여라
최소로 줄이라고 해서 조그만 클래스와 메서드를 수없이 만들라는 것이 아니다.

함수와 클래스 크기를 작게 유지하면서 동시에 시스템(전체 구조) 크기도 작게 유지하는 데 있다.

(설계 규칙 4가지 중 우선 순위가 낮아 앞서 말한 3가지 작업이 더 중요하긴 하다고 합니다.)


<br>

## 결론
단순한 설계 규칙으로 클린한 코드를 짜는 것에 대해 경험을 많이 해봐야한다.
