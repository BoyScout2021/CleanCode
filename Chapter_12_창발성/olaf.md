# 12장 창발성

## 창발적 설계로 깔끔한 코드를 구현하자

단순한 설계를 위한 켄트 벡의 규칙(중요도 순서)

* 모든 테스트를 실행한다.
* 중복을 없앤다.
* 프로그래머 의도를 표현한다.
* 클래스와 메서드 수를 최소로 줄인다.



## 단순한 설계 규칙 1: 모든 테스트를 실행하라

설계는 의도한 대로 돌아가는 시스템을 내놓아야함. -> 검증할 간단한 방법이 없다면 이 시스템에 대한 가치는 인정 받기 어렵다.

테스트를 철저히 거쳐 모든 테스트 케이스를 항상 통과하는 시스템은 `테스트 가능한 시스템`이다. 테스트가 불가능하다는 것은 검증도 불가능 하다는 것이다.

테스트가 가능한 시스템을 만들려고 애쓰면 설계 품질도 높아진다.

* 크기가 작고 목적이 하나인 클래스가 나옴 - SRP를  준수하는 클래스
* 결합도를 낮추려고 노력함 - 결합도가 높으면 테스트를 하기 어렵기 때문에 DIP, 인터페이스, 추상화 등과 같은 도구를 사용해 결합도를 낮춤
* 즉 테스트 코드를 짜려는 노력은 낮은 결합도와 높은 응집력이라는 객체 지향 방법론이 지향하는 목표를 달성하게 함.



## 단순한 설계 규칙 2~4: 리팩터링

모든 것은 테스트 케이스가 있다는 가정하에 일어난다(ㅠㅠ)

코드를 점진적으로 리팩터링 해간다. 코드 몇 줄을 추가할 때마다 잠시 멈추고 설계를 조감한다. 

새로 추가한 코드가 설계 품질을 낮춘다면 깔끔하게 정리한 후 테스트 코드를 실행해 동작을 검증한다.

리팩터링 단계에서는 소프트웨어 설계 품질을 높이는 기법이라면 무엇이든 적용해도 좋다.

* 응집도를 높인다
* 결합도를 낮춘다
* 관심사를 분리한다
* 함수와 클래스 크기를 줄인다.
* 더 나은 이름을 선택한다.



## 중복을 없애라

우수한 설계에서 중복은 커다란 적이다. 중복은 추가 작업, 추가 위험, 불필요한 복잡도를 뜻하기 때문이다. 중복은 여러 가지 형태로 표출된다. 똑같은 코드는 당연히 중복이다.(근데 UI요소는 중복이 발생할 수 밖에 없는데... 이건 잘 모르겠다ㅎ)



## 표현하라

코드를 짜는 동안에는 문제에 푹 빠져 코드를 구석구석 이해하지만, 나중에 코드를 유지보수할 사람이 코드를 짰던 사람만큼이나 이해할 가능성은 희박하다.

소프트웨어 프로젝트 비용 중 대다수는 장기적인 유지보수에 들어간다. 코드를 변경하면서 버그를 발생하지 않으려면, 유지보수 개발자가 시스템을 제대로 이해해야한다. 즉 개발자는 코드의 의도를 정확히 표현해야 한다. 결국 이는 유지보수 비용을 줄이는 방법이다.

다음과 같이 코드를 작성해보자.

* 좋은 이름을 선택한다
* 함수와 클래스 크기를 가능한 줄인다
* 표준 명칭을 사용한다
* 단위 테스트와 테스트 케이스를 꼼꼼히 작성한다



## 클래스와 메서드 수를 최소로 줄여라

중복을 제거하고, 의도를 표현하고, SRP를 준수한다는 기본적인 개념도 극단으로 치달으면 득보다 실이 많아진다. 따라서 `가능한` 줄이도록 하자.

클래스와 함수 수를 줄이는 작업도 중요하지만, 테스트 케이스를 만들고 중복을 제거하고 의도를 표현하는 작업이 더 중요하다.